<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImparIAmo - Giochi Educativi Divertenti!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Schermata Selezione Utente -->
        <div id="user-selection-screen" class="screen active">
            <div class="container">
                <h1 class="game-title">ğŸ® ImparIAmo! ğŸ®</h1>
                <p class="subtitle">Scegli il tuo profilo per iniziare!</p>

                <div id="users-list" class="users-grid"></div>

                <button id="add-user-btn" class="btn btn-primary">
                    â• Aggiungi Nuovo Giocatore
                </button>

                <div id="new-user-form" class="hidden">
                    <input type="text" id="new-user-name" placeholder="Nome del giocatore" maxlength="15">

                    <select id="new-user-age" class="age-select">
                        <option value="">Seleziona etÃ </option>
                        <option value="4">4 anni ğŸ£</option>
                        <option value="5">5 anni ğŸ¦‹</option>
                        <option value="6">6 anni ğŸŒŸ</option>
                        <option value="7">7 anni ğŸš€</option>
                        <option value="8">8 anni ğŸ¨</option>
                        <option value="9">9 anni ğŸ¯</option>
                        <option value="10">10 anni ğŸ†</option>
                    </select>

                    <select id="new-user-avatar" class="avatar-select">
                        <option value="">Scegli avatar</option>
                        <option value="ğŸ¦">ğŸ¦ Leone</option>
                        <option value="ğŸ¼">ğŸ¼ Panda</option>
                        <option value="ğŸ¨">ğŸ¨ Koala</option>
                        <option value="ğŸ¦Š">ğŸ¦Š Volpe</option>
                        <option value="ğŸ¯">ğŸ¯ Tigre</option>
                        <option value="ğŸ¸">ğŸ¸ Rana</option>
                        <option value="ğŸ°">ğŸ° Coniglio</option>
                        <option value="ğŸ»">ğŸ» Orso</option>
                    </select>

                    <button id="save-user-btn" class="btn btn-success">Salva</button>
                    <button id="cancel-user-btn" class="btn btn-secondary">Annulla</button>
                </div>
            </div>
        </div>

        <!-- Schermata Selezione Categorie -->
        <div id="categories-selection-screen" class="screen">
            <div class="container">
                <div class="header-bar">
                    <button class="btn-back">â† Indietro</button>
                    <div class="user-info">
                        <span id="current-user-name-categories" class="clickable-username"></span>
                        <span class="points-badge">â­ <span id="header-points-categories">0</span></span>
                    </div>
                </div>

                <h1>Scegli una Categoria</h1>
                <p class="subtitle">Quale argomento vuoi esplorare oggi?</p>

                <div class="categories-grid">
                    <div class="category-card category-numeri" data-category="numeri">
                        <div class="category-icon">ğŸ”¢</div>
                        <h3>Numeri</h3>
                        <p>Matematica e calcoli!</p>
                        <div class="category-points">â­ <span id="points-numeri">0</span></div>
                    </div>

                    <div class="category-card category-lettere" data-category="lettere">
                        <div class="category-icon">ğŸ”¤</div>
                        <h3>Lettere</h3>
                        <p>Parole e linguaggio!</p>
                        <div class="category-points">â­ <span id="points-lettere">0</span></div>
                    </div>

                    <div class="category-card category-logica" data-category="logica">
                        <div class="category-icon">ğŸ§©</div>
                        <h3>Logica</h3>
                        <p>Enigmi e puzzle!</p>
                        <div class="category-points">â­ <span id="points-logica">0</span></div>
                    </div>

                    <div class="category-card category-lingue" data-category="lingue">
                        <div class="category-icon">ğŸŒ</div>
                        <h3>Lingue</h3>
                        <p>Impara nuove lingue!</p>
                        <div class="category-points">â­ <span id="points-lingue">0</span></div>
                    </div>

                    <div class="category-card category-varie" data-category="varie">
                        <div class="category-icon">ğŸ®</div>
                        <h3>Varie</h3>
                        <p>Giochi in arrivo...</p>
                        <div class="category-status">ğŸš§ In costruzione</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schermata Selezione Giochi -->
        <div id="games-selection-screen" class="screen">
            <div class="container">
                <div class="header-bar">
                    <button class="btn-back">â† Categorie</button>
                    <div class="user-info">
                        <span id="current-user-name-games" class="clickable-username"></span>
                        <span class="points-badge">â­ <span id="header-points-games">0</span></span>
                    </div>
                </div>

                <h1 id="games-category-title">Giochi</h1>
                <p class="subtitle">Scegli il gioco che preferisci!</p>

                <div id="games-grid" class="games-grid">
                    <!-- Popolato dinamicamente -->
                </div>
            </div>
        </div>

        <!-- Schermata Profilo Utente -->
        <div id="user-profile-screen" class="screen">
            <div class="container">
                <div class="header-bar">
                    <button class="btn-back">â† Indietro</button>
                    <h2 class="profile-header">Il Tuo Profilo</h2>
                </div>

                <!-- Sezione Dati Utente -->
                <div class="profile-section">
                    <h3>ğŸ“ Informazioni</h3>
                    <div class="profile-info">
                        <div class="profile-avatar-display" id="profile-avatar-display">ğŸ¦</div>
                        <div class="profile-field">
                            <label>Nome:</label>
                            <input type="text" id="profile-name-input" maxlength="15" />
                        </div>
                        <div class="profile-field">
                            <label>EtÃ :</label>
                            <select id="profile-age-input">
                                <option value="4">4 anni ğŸ£</option>
                                <option value="5">5 anni ğŸ¦‹</option>
                                <option value="6">6 anni ğŸŒŸ</option>
                                <option value="7">7 anni ğŸš€</option>
                                <option value="8">8 anni ğŸ¨</option>
                                <option value="9">9 anni ğŸ¯</option>
                                <option value="10">10 anni ğŸ†</option>
                            </select>
                        </div>
                        <div class="profile-field">
                            <label>Avatar:</label>
                            <select id="profile-avatar-input">
                                <option value="ğŸ¦">ğŸ¦ Leone</option>
                                <option value="ğŸ¼">ğŸ¼ Panda</option>
                                <option value="ğŸ¨">ğŸ¨ Koala</option>
                                <option value="ğŸ¦Š">ğŸ¦Š Volpe</option>
                                <option value="ğŸ¯">ğŸ¯ Tigre</option>
                                <option value="ğŸ¸">ğŸ¸ Rana</option>
                                <option value="ğŸ°">ğŸ° Coniglio</option>
                                <option value="ğŸ»">ğŸ» Orso</option>
                            </select>
                        </div>
                        <button id="save-profile-btn" class="btn btn-success">ğŸ’¾ Salva Modifiche</button>
                    </div>
                </div>

                <!-- Sezione Statistiche -->
                <div class="profile-section">
                    <h3>ğŸ“Š Statistiche</h3>

                    <div class="stats-total">
                        <div class="stat-big">
                            <span class="stat-label">Punti Totali</span>
                            <span class="stat-value" id="profile-total-points">0</span>
                        </div>
                    </div>

                    <div class="stats-categories">
                        <h4>Punti per Categoria</h4>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-icon">ğŸ”¢</span>
                                <span class="stat-name">Numeri</span>
                                <span class="stat-points" id="profile-points-numeri">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">ğŸ”¤</span>
                                <span class="stat-name">Lettere</span>
                                <span class="stat-points" id="profile-points-lettere">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">ğŸ§©</span>
                                <span class="stat-name">Logica</span>
                                <span class="stat-points" id="profile-points-logica">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">ğŸŒ</span>
                                <span class="stat-name">Lingue</span>
                                <span class="stat-points" id="profile-points-lingue">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">ğŸ®</span>
                                <span class="stat-name">Varie</span>
                                <span class="stat-points" id="profile-points-varie">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="stats-games">
                        <h4>Punti per Gioco</h4>
                        <div class="stats-list">
                            <div class="stat-row">
                                <span class="game-name">ğŸ”¢ Matematica Magica</span>
                                <span class="game-points" id="profile-game-math">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="game-name">âœ–ï¸ Tabelline</span>
                                <span class="game-points" id="profile-game-tabelline">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="game-name">ğŸ”¤ Lettere e Parole</span>
                                <span class="game-points" id="profile-game-letters">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="game-name">ğŸ–¼ï¸ Scopri la Parola</span>
                                <span class="game-points" id="profile-game-imageguess">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="game-name">ğŸ§© Sfida di Logica</span>
                                <span class="game-points" id="profile-game-logic">0</span>
                            </div>
                            <div class="stat-row">
                                <span class="game-name">ğŸ‡¬ğŸ‡§ Impara l'Inglese</span>
                                <span class="game-points" id="profile-game-english">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schermata Selezione EtÃ  -->
        <div id="age-selection-screen" class="screen">
            <div class="container">
                <div class="header-bar">
                    <button class="btn-back">â† Indietro</button>
                    <div class="user-info">
                        <span id="current-user-name"></span>
                        <span class="points-badge">â­ <span id="header-points">0</span></span>
                    </div>
                </div>

                <h1>Quanti anni hai?</h1>
                <p class="subtitle">Scegli la tua etÃ  per giochi adatti a te!</p>

                <div class="age-grid">
                    <button class="age-btn" data-age="4">4 anni ğŸ£</button>
                    <button class="age-btn" data-age="5">5 anni ğŸ¦‹</button>
                    <button class="age-btn" data-age="6">6 anni ğŸŒŸ</button>
                    <button class="age-btn" data-age="7">7 anni ğŸš€</button>
                    <button class="age-btn" data-age="8">8 anni ğŸ¨</button>
                    <button class="age-btn" data-age="9">9 anni ğŸ¯</button>
                    <button class="age-btn" data-age="10">10 anni ğŸ†</button>
                </div>
            </div>
        </div>

        <!-- Schermata Selezione Materie -->
        <div id="subject-selection-screen" class="screen">
            <div class="container">
                <div class="header-bar">
                    <button class="btn-back">â† Indietro</button>
                    <div class="user-info">
                        <span id="current-user-name-2"></span>
                        <span class="points-badge">â­ <span id="header-points-2">0</span></span>
                    </div>
                </div>

                <h1>Cosa vuoi imparare oggi?</h1>
                <p class="subtitle">Scegli il tuo gioco preferito!</p>

                <div class="subjects-grid">
                    <div class="subject-card" data-subject="math">
                        <div class="subject-icon">ğŸ”¢</div>
                        <h3>Matematica</h3>
                        <p>Somme e sottrazioni divertenti!</p>
                    </div>
                    <div class="subject-card" data-subject="letters">
                        <div class="subject-icon">ğŸ”¤</div>
                        <h3>Lettere e Parole</h3>
                        <p>Forma parole magiche!</p>
                    </div>
                    <div class="subject-card" data-subject="logic">
                        <div class="subject-icon">ğŸ§©</div>
                        <h3>Logica</h3>
                        <p>Indovinelli e puzzle!</p>
                    </div>
                    <div class="subject-card" data-subject="imageguess">
                        <div class="subject-icon">ğŸ–¼ï¸</div>
                        <h3>Scopri la Parola</h3>
                        <p>Indovina le parole dalle immagini!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gioco Matematica -->
        <div id="math-game-screen" class="screen">
            <div class="container">
                <div class="game-header">
                    <button class="btn-back">â† Menu</button>
                    <div class="game-stats">
                        <span class="stat">â­ <span id="math-points">0</span></span>
                        <span class="stat">Round <span id="math-round-number">1</span></span>
                    </div>
                </div>

                <div class="round-progress">
                    <div class="progress-info">
                        <span>Progresso Round</span>
                        <span><span id="math-round-current">0</span>/10</span>
                    </div>
                    <div class="progress-bar">
                        <div id="math-progress-fill" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <h2 class="game-title-small">ğŸ”¢ Matematica Magica</h2>

                <!-- Pulsante per mostrare/nascondere opzioni -->
                <button id="toggle-operations-btn" class="btn btn-secondary toggle-operations-btn">
                    âš™ï¸ Opzioni
                </button>

                <!-- Selezione Operazioni (nascosto inizialmente) -->
                <div id="math-operations-selector" class="operations-selector hidden">
                    <p class="selector-title">Scegli le operazioni da includere:</p>
                    <div class="operations-grid">
                        <label class="operation-checkbox">
                            <input type="checkbox" id="op-addition" checked>
                            <span class="operation-label">â• Somme</span>
                        </label>
                        <label class="operation-checkbox">
                            <input type="checkbox" id="op-subtraction" checked>
                            <span class="operation-label">â– Sottrazioni</span>
                        </label>
                        <label class="operation-checkbox">
                            <input type="checkbox" id="op-multiplication">
                            <span class="operation-label">âœ–ï¸ Moltiplicazioni</span>
                        </label>
                        <label class="operation-checkbox">
                            <input type="checkbox" id="op-division">
                            <span class="operation-label">â— Divisioni senza resto</span>
                        </label>
                        <label class="operation-checkbox">
                            <input type="checkbox" id="op-division-remainder">
                            <span class="operation-label">â— Divisioni con resto</span>
                        </label>
                    </div>
                </div>

                <div id="math-question" class="question-box">
                    <p class="question-text"></p>
                </div>

                <div id="math-answers" class="answers-grid"></div>

                <div id="math-feedback" class="feedback hidden"></div>

                <div id="math-celebration" class="celebration hidden"></div>
            </div>
        </div>

        <!-- Gioco Tabelline -->
        <div id="tabelline-game-screen" class="screen">
            <div class="container">
                <div class="game-header">
                    <button class="btn-back">â† Menu</button>
                    <div class="game-stats">
                        <span class="stat">â­ <span id="tabelline-points">0</span></span>
                        <span class="stat">Round <span id="tabelline-round-number">1</span></span>
                    </div>
                </div>

                <div class="round-progress">
                    <div class="progress-info">
                        <span>Progresso Round</span>
                        <span><span id="tabelline-round-current">0</span>/10</span>
                    </div>
                    <div class="progress-bar">
                        <div id="tabelline-progress-fill" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <h2 class="game-title-small">âœ–ï¸ Tabelline</h2>

                <div id="tabelline-question" class="question-box">
                    <p class="question-text"></p>
                </div>

                <div id="tabelline-answers" class="answers-grid"></div>

                <div id="tabelline-feedback" class="feedback hidden"></div>

                <div id="tabelline-celebration" class="celebration hidden"></div>
            </div>
        </div>

        <!-- Gioco Lettere -->
        <div id="letters-game-screen" class="screen">
            <div class="container">
                <div class="game-header">
                    <button class="btn-back">â† Menu</button>
                    <div class="game-stats">
                        <span class="stat">â­ <span id="letters-points">0</span></span>
                        <span class="stat">Round <span id="letters-round-number">1</span></span>
                    </div>
                </div>

                <div class="round-progress">
                    <div class="progress-info">
                        <span>Progresso Round</span>
                        <span><span id="letters-round-current">0</span>/10</span>
                    </div>
                    <div class="progress-bar">
                        <div id="letters-progress-fill" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <h2 class="game-title-small">ğŸ”¤ Caccia alle Parole</h2>

                <div class="letters-container">
                    <p class="instruction">Forma TUTTE le parole che riesci con queste lettere!</p>
                    <div id="available-letters" class="letters-box"></div>

                    <div id="word-construction" class="word-box"></div>

                    <div class="game-controls">
                        <button id="clear-word-btn" class="btn btn-secondary">ğŸ”„ Cancella</button>
                        <button id="submit-word-btn" class="btn btn-success">âœ“ Conferma Parola</button>
                        <button id="next-letters-btn" class="btn btn-primary">â¡ï¸ Nuove Lettere</button>
                    </div>

                    <div id="letters-feedback" class="feedback hidden"></div>
                    <div id="words-found-list" class="words-found"></div>
                </div>
            </div>
        </div>

        <!-- Gioco Logica -->
        <div id="logic-game-screen" class="screen">
            <div class="container">
                <div class="game-header">
                    <button class="btn-back">â† Menu</button>
                    <div class="game-stats">
                        <span class="stat">â­ <span id="logic-points">0</span></span>
                        <span class="stat">Round <span id="logic-round-number">1</span></span>
                    </div>
                </div>

                <div class="round-progress">
                    <div class="progress-info">
                        <span>Progresso Round</span>
                        <span><span id="logic-round-current">0</span>/10</span>
                    </div>
                    <div class="progress-bar">
                        <div id="logic-progress-fill" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <h2 class="game-title-small">ğŸ§© Sfida di Logica</h2>

                <div id="logic-question" class="question-box">
                    <p class="question-text"></p>
                </div>

                <div id="logic-interactive" class="logic-area"></div>

                <div id="logic-feedback" class="feedback hidden"></div>

                <button id="logic-next-btn" class="btn btn-primary hidden" style="margin-top: 20px;">â¡ï¸ Prossimo Gioco</button>
            </div>
        </div>

        <!-- Gioco Scopri la Parola -->
        <div id="imageguess-game-screen" class="screen">
            <div class="container">
                <div class="game-header">
                    <button class="btn-back">â† Menu</button>
                    <div class="game-stats">
                        <span class="stat">â­ <span id="imageguess-points">0</span></span>
                        <span class="stat">Round <span id="imageguess-round-number">1</span></span>
                    </div>
                </div>

                <div class="round-progress">
                    <div class="progress-info">
                        <span>Progresso Round</span>
                        <span><span id="imageguess-round-current">0</span>/10</span>
                    </div>
                    <div class="progress-bar">
                        <div id="imageguess-progress-fill" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <h2 class="game-title-small">ğŸ–¼ï¸ Scopri la Parola</h2>

                <div class="imageguess-container">
                    <p class="instruction">Indovina la parola selezionando le lettere!</p>

                    <div id="image-guess-emoji" class="emoji-display"></div>

                    <div id="imageguess-word-construction" class="word-box"></div>

                    <div id="imageguess-available-letters" class="letters-box"></div>

                    <div class="game-controls">
                        <button id="clear-imageguess-btn" class="btn btn-secondary">ğŸ”„ Cancella</button>
                    </div>

                    <div id="imageguess-feedback" class="feedback hidden"></div>
                </div>
            </div>
        </div>

        <!-- Gioco Inglese -->
        <div id="english-game-screen" class="screen">
            <div class="container">
                <div class="game-header">
                    <button class="btn-back">â† Menu</button>
                    <div class="game-stats">
                        <span class="stat">â­ <span id="english-points">0</span></span>
                        <span class="stat">Round <span id="english-round-number">1</span></span>
                    </div>
                </div>

                <div class="round-progress">
                    <div class="progress-info">
                        <span>Progresso Round</span>
                        <span><span id="english-round-current">0</span>/<span id="english-round-total">10</span></span>
                    </div>
                    <div class="progress-bar">
                        <div id="english-progress-fill" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <h2 class="game-title-small">ğŸ‡¬ğŸ‡§ Impara l'Inglese</h2>

                <!-- Selettore Tema -->
                <div id="english-topic-selector" class="topic-selector">
                    <p class="instruction">Scegli un argomento per iniziare!</p>
                    <div class="topics-grid">
                        <button class="topic-btn" data-topic="numbers">ğŸ”¢ Numeri</button>
                        <button class="topic-btn" data-topic="colors">ğŸ¨ Colori</button>
                        <button class="topic-btn" data-topic="animals">ğŸ¾ Animali</button>
                        <button class="topic-btn" data-topic="objects">ğŸ“¦ Oggetti</button>
                        <button class="topic-btn" data-topic="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Famiglia</button>
                        <button class="topic-btn" data-topic="food">ğŸ• Cibo</button>
                        <button class="topic-btn" data-topic="months">ğŸ“… Mesi</button>
                    </div>
                </div>

                <!-- Area di Gioco -->
                <div id="english-game-area" class="english-container hidden">
                    <div class="current-topic-badge">
                        <span id="current-topic-label"></span>
                        <button id="change-topic-btn" class="btn-mini">ğŸ”„ Cambia</button>
                    </div>

                    <div id="english-emoji-display" class="emoji-display-large"></div>
                    <div id="english-italian-name" class="italian-name-display hidden"></div>

                    <div class="pronunciation-area">
                        <button id="pronounce-btn" class="btn-pronounce">ğŸ”Š Ascolta</button>
                        <div id="english-word-display" class="english-word hidden"></div>
                    </div>

                    <p class="instruction">Qual Ã¨ la parola in inglese?</p>

                    <div id="english-answers" class="answers-grid"></div>

                    <!-- Input per scrivere la risposta (tema mesi) -->
                    <div id="english-input-container" class="english-input-container hidden">
                        <input type="text" id="english-text-input" class="english-text-input" placeholder="Scrivi la parola in inglese..." maxlength="20" autocomplete="off">
                        <button id="english-check-btn" class="btn btn-primary">âœ“ Verifica</button>
                    </div>

                    <div id="english-feedback" class="feedback hidden"></div>
                </div>

                <!-- Feedback Overlay -->
                <div id="english-feedback-overlay" class="feedback-overlay hidden">
                    <div class="feedback-overlay-content"></div>
                </div>

                <div id="english-celebration" class="celebration hidden"></div>
            </div>
        </div>
    </div>

    <!-- Audio per i suoni -->
    <audio id="correct-sound" preload="auto"></audio>
    <audio id="wrong-sound" preload="auto"></audio>
    <audio id="celebration-sound" preload="auto"></audio>

    <script src="app.js"></script>
    <script src="rounds.js"></script>
    <script src="temporal_sequence.js"></script>
</body>
</html>
